import React, { useEffect, useState } from 'react'
import { Link } from 'react-router-dom'
import Navbar from './navigationbar'
import { ChevronDownIcon } from '@heroicons/react/solid'
import { useSelector } from 'react-redux'
import { pageMenuSelector } from '../../redux/slices/pageReducer'
import './topbar.css'
import { addTenantToUrl, homeUrl } from '../../services/service.config'
import AlgoliaSearchbar from '../AlgoliaSearchbar'
import { useContentful } from '../../context/contentful-provider'
import { useSites } from 'context/sites-provider'

const Logo = ({ onMouseOver }) => {
  const { fields } = useContentful()
  const { sites, onSiteChange, currentSite, currentSiteObject } = useSites()

  const [logoUrl, setLogoUrl] = useState('')
  const { companyLogo } = fields

  useEffect(() => {
    ;(async () => {
      if (
        companyLogo &&
        companyLogo.fields &&
        companyLogo.fields.file &&
        companyLogo.fields.file.url
      ) {
        setLogoUrl(companyLogo.fields.file.url)
      }
    })()
  }, [companyLogo])

  return (
    <Link to={homeUrl()} className="lg:ml-[-250px] block" onMouseOver={onMouseOver}>
      <div className="w-[37px]">
        {currentSite === 'main' ? (
          <svg className="fill-black" height="30" viewBox="0 0 109.9 20"><title>Hirmer Logo</title><path d="M19 3.3h1V0h-7.3v3.3h1a.764.764 0 01.5.2.764.764 0 01.2.5v3.8H5.7V4a.764.764 0 01.2-.5.764.764 0 01.5-.2h1V0H0v3.3h1a.764.764 0 01.5.2c.1.2.2.3.2.5v12c0 .2-.1.3-.2.5a.764.764 0 01-.5.2H0V20h7.3v-3.3h-1a.684.684 0 01-.7-.7v-4.1h8.7V16c0 .2-.1.3-.2.5a.764.764 0 01-.5.2h-1V20H20v-3.3h-1a.684.684 0 01-.7-.7V4c0-.2.1-.3.2-.5a.764.764 0 01.5-.2zM68 7v9c0 .2-.1.3-.2.5a.764.764 0 01-.5.2h-1V20h7.3v-3.3h-1a.764.764 0 01-.5-.2.9.9 0 01-.1-.5V4c0-.2.1-.3.2-.5a.764.764 0 01.5-.2h1V0H68l-6.3 9.1L55.5 0h-5.7v3.3h1a.764.764 0 01.5.2.764.764 0 01.2.5v12c0 .2-.1.3-.2.5a.764.764 0 01-.5.2h-1V20h7.3v-3.3h-1a.684.684 0 01-.7-.7V7l6 8.7c0 .1.2.2.3.2s.2-.1.3-.2zM28.5 3.3h1V0h-7.3v3.3h1a.764.764 0 01.5.2.764.764 0 01.2.5v12c0 .2-.1.3-.2.5a.764.764 0 01-.5.2h-1V20h7.3v-3.3h-1a.684.684 0 01-.7-.7V4a.764.764 0 01.2-.5.764.764 0 01.5-.2zM91.6 0H75.8v3.3h1a.764.764 0 01.5.2.764.764 0 01.2.5v12c0 .2-.1.3-.2.5a.764.764 0 01-.5.2h-1V20h15.8v-5.3h-3.9V16c0 .2-.1.3-.2.5a.764.764 0 01-.5.2h-4.8a.684.684 0 01-.7-.7v-4.1h4.2v-4h-4.2V4a.764.764 0 01.2-.5.764.764 0 01.5-.2H87a.764.764 0 01.5.2.764.764 0 01.2.5v1.3h3.9zM37.4 16.4a.764.764 0 01-.2-.5v-3.2h1.5l4 6.3a1.79 1.79 0 001.4.9h3.7v-3.3h-1.2a1.79 1.79 0 01-1.4-.9l-2.1-3.3a6 6 0 004.6-6.1c0-4.7-3.3-6.3-6.5-6.3h-9.8v3.3h1a.764.764 0 01.5.2.764.764 0 01.2.5v12c0 .2-.1.3-.2.5a.764.764 0 01-.5.2h-1V20h7.3v-3.3h-1c.1 0-.1-.1-.3-.3zm0-12.9a.764.764 0 01.5-.2H41c1 0 2.6.4 2.6 2.8S42 8.8 41 8.8h-3.8V4c0-.2.1-.3.2-.5zm70 12.2l-2.1-3.3a6 6 0 004.6-6.1c0-4.7-3.3-6.3-6.5-6.3h-9.8v3.3h1a.764.764 0 01.5.2.764.764 0 01.2.5v12c0 .2-.1.3-.2.5a.764.764 0 01-.5.2h-1V20h7.3v-3.3h-1a.684.684 0 01-.7-.7v-3.2h1.5l4 6.3a1.79 1.79 0 001.4.9h3.7v-3.3h-1.2c-.7 0-1.2-.9-1.2-1zm-4.2-6.9h-3.8V4a.764.764 0 01.2-.5.764.764 0 01.5-.2h3.1c1 0 2.6.4 2.6 2.8a2.409 2.409 0 01-2.6 2.7z"></path></svg>
        ) : ''}
        {currentSite === 'HGG' ? (
          <svg icon="hgg_logo_de" className="fill-black" height="56" viewBox="0 0 59 20"><title>Hirmer Grosse Groessen Logo DE</title><path d="M3.131 8.81a.38.38 0 01-.1-.258v-2.2h4.643v2.2a.394.394 0 01-.1.258.46.46 0 01-.287.115l-.526.008v1.777H10.7V8.934l-.52-.01a.436.436 0 01-.287-.114.38.38 0 01-.1-.258v-6.39a.4.4 0 01.1-.259.456.456 0 01.286-.114l.526-.01V0H6.763v1.78l.527.008a.436.436 0 01.286.114.375.375 0 01.1.259V4.2H3.03V2.162a.394.394 0 01.1-.259.456.456 0 01.286-.114l.527-.01V0H0v1.78l.536.008a.436.436 0 01.285.112.366.366 0 01.1.255V8.55a.369.369 0 01-.1.255.434.434 0 01-.283.115l-.53.01v1.77h3.937V8.927l-.53-.008A.436.436 0 013.13 8.8v.01zm33.355-5.055v4.8a.369.369 0 01-.1.255.434.434 0 01-.283.115l-.526.009v1.777h3.94V8.93l-.526-.009a.436.436 0 01-.287-.115.366.366 0 01-.1-.255v-6.4a.38.38 0 01.1-.256.463.463 0 01.287-.115l.526-.008V0H36.49l-3.37 4.849L29.752 0h-3.029v1.776l.527.008a.436.436 0 01.286.116.367.367 0 01.1.252v6.4a.372.372 0 01-.1.252.436.436 0 01-.286.115l-.527.01V10.7h3.94V8.927l-.535-.008a.436.436 0 01-.286-.115.369.369 0 01-.1-.256v-4.8l3.212 4.635a.166.166 0 00.154.1.169.169 0 00.153-.1l3.213-4.635h.015zM15.266 1.79l.536-.008V.007h-3.95v1.776l.527.008a.436.436 0 01.285.115.362.362 0 01.1.252v6.4a.372.372 0 01-.1.252.436.436 0 01-.285.115l-.527.01v1.775h3.941V8.933l-.536-.008a.436.436 0 01-.286-.115.364.364 0 01-.1-.252v-6.4a.369.369 0 01.1-.252.46.46 0 01.295-.115zM49.143.006h-8.479v1.777l.528.008a.436.436 0 01.285.115.367.367 0 01.1.26v6.39a.394.394 0 01-.1.258.452.452 0 01-.285.114l-.528.009v1.777h8.476V7.858h-2.117v.706a.372.372 0 01-.1.252.436.436 0 01-.286.115h-2.56a.436.436 0 01-.285-.115.369.369 0 01-.1-.255v-2.2h2.266V4.212h-2.267v-2.04a.369.369 0 01.1-.257.434.434 0 01.283-.114h2.56a.436.436 0 01.285.114.363.363 0 01.1.253v.71h2.116l.008-2.872zm-24.87 8.428l-1.12-1.767a3.21 3.21 0 002.488-3.283A3.185 3.185 0 0022.178.006h-5.232v1.777l.526.008a.436.436 0 01.287.115.37.37 0 01.1.26v6.39a.394.394 0 01-.1.258.436.436 0 01-.287.114l-.526.009v1.777h3.946V8.937l-.526-.009a.436.436 0 01-.287-.115.366.366 0 01-.1-.255V6.835h.8l2.15 3.384a.93.93 0 00.756.491h1.971V8.933h-.626a.949.949 0 01-.755-.495h-.006zm-2.249-3.717h-2.05V2.156a.377.377 0 01.1-.255.436.436 0 01.286-.116l.526-.008h1.142c.512 0 1.375.192 1.375 1.481a1.278 1.278 0 01-1.375 1.455zm35.593 3.717L56.5 6.667a3.209 3.209 0 002.487-3.283A3.184 3.184 0 0055.522.006h-5.233v1.777l.53.008a.436.436 0 01.287.115.374.374 0 01.1.256v6.39a.369.369 0 01-.1.255.434.434 0 01-.283.115l-.53.009v1.777h3.94V8.93l-.526-.009a.436.436 0 01-.287-.115.364.364 0 01-.1-.253V6.83h.8l2.147 3.384a.937.937 0 00.755.49H59V8.928h-.63a.942.942 0 01-.747-.495h-.006zm-2.246-3.717h-2.05V2.156a.372.372 0 01.1-.253.436.436 0 01.286-.114l.526-.01h1.142c.512 0 1.373.193 1.373 1.483a1.277 1.277 0 01-1.377 1.455zm-15.577 9.02h.678v.742h-.678v-.743zm-1.114 0h.68v.742h-.68v-.743zM10.75 14.89a1.451 1.451 0 00-1.564 1.621v1.581c0 1.316.482 1.906 1.564 1.906s1.562-.59 1.562-1.906v-1.581a1.448 1.448 0 00-1.562-1.62zm.845 3.228c0 1.07-.31 1.278-.845 1.278s-.85-.208-.85-1.278V16.49c0-.823.461-1 .847-1s.845.172.845 1v1.63zm3.966-1.018c-.492-.252-.913-.47-.913-.925a.641.641 0 01.7-.668.534.534 0 01.058 0 .676.676 0 01.454.174.875.875 0 01.187.662v.044h.729v-.042a1.227 1.227 0 00-1.382-1.451 1.321 1.321 0 00-1.46 1.35c0 .814.653 1.145 1.231 1.445.5.261.936.485.936.95 0 .49-.277.737-.819.737a.725.725 0 01-.767-.818v-.184h-.692v.043a1.659 1.659 0 00.345 1.2 1.459 1.459 0 001.082.373h.026c.994 0 1.542-.493 1.542-1.387 0-.85-.669-1.2-1.255-1.5zm4.392 0c-.49-.252-.912-.47-.912-.925a.642.642 0 01.7-.668h.056a.69.69 0 01.458.174.891.891 0 01.187.662v.044h.72v-.042a1.442 1.442 0 00-.323-1.09 1.4 1.4 0 00-1.06-.361 1.322 1.322 0 00-1.46 1.35c0 .814.657 1.154 1.237 1.448.5.262.937.484.937.95 0 .49-.277.736-.819.736a.722.722 0 01-.764-.817v-.183h-.69v.042a1.626 1.626 0 00.349 1.2 1.446 1.446 0 001.08.38h.024c.994 0 1.542-.493 1.542-1.386-.01-.854-.674-1.2-1.256-1.5h-.006zm3.48.593h1.74v-.619h-1.74v-1.462h1.873v-.62h-2.574V19.9h2.614v-.622H23.43v-1.58zM30.4 14.89a1.45 1.45 0 00-1.563 1.621v1.583c0 1.317.481 1.906 1.563 1.906a3.107 3.107 0 001.535-.409l-.015.01v-2.39h-1.594v.622h.89v1.383a1.628 1.628 0 01-.758.186H30.4c-.536 0-.847-.208-.847-1.278V16.5c0-.827.461-1 .847-1 .568 0 .813.247.813.83v.042h.728v-.042a1.393 1.393 0 00-.3-1.058 1.618 1.618 0 00-1.235-.38zm6.052 3.71c-.027-.8-.169-1.106-.578-1.229l-.072-.021.07-.027a1.088 1.088 0 00.668-1.077A1.126 1.126 0 0035.335 15h-1.7v4.9h.7v-2.22h.678c.277 0 .645.06.687.573.014.186.024.372.03.55a2.975 2.975 0 00.17 1.097h.731l-.018-.057a6.79 6.79 0 01-.162-1.229V18.6zm-1.235-1.533h-.879v-1.458h.885a.611.611 0 01.606.692c0 .334-.16.757-.614.757v.006zM1.566 14.89A1.451 1.451 0 000 16.511v1.583C0 19.411.484 20 1.566 20a3.107 3.107 0 001.534-.409l-.016.01v-2.39H1.495v.622h.892v1.383a1.625 1.625 0 01-.761.186h-.058c-.536 0-.845-.208-.845-1.278V16.5c0-.826.46-1 .845-1 .57 0 .813.247.813.83v.042h.729v-.042a1.392 1.392 0 00-.3-1.058 1.628 1.628 0 00-1.234-.379h-.01zm6.052 3.71c-.026-.8-.168-1.106-.578-1.229l-.072-.021.07-.027a1.088 1.088 0 00.668-1.077A1.126 1.126 0 006.5 15H4.8v4.9h.7v-2.22h.678c.277 0 .644.06.686.573.015.186.024.372.03.55a2.972 2.972 0 00.168 1.097H7.8l-.018-.057a7.059 7.059 0 01-.165-1.229V18.6zm-1.234-1.54H5.5v-1.448h.885a.611.611 0 01.606.691c0 .334-.154.757-.608.757zm33.19-2.17a1.448 1.448 0 00-1.561 1.621v1.581c0 1.316.481 1.906 1.562 1.906s1.563-.59 1.563-1.906v-1.581a1.448 1.448 0 00-1.563-1.62zm.85 3.228c0 1.07-.31 1.278-.846 1.278s-.846-.208-.846-1.278V16.49c0-.823.457-1 .846-1s.846.172.846 1v1.63zm3.962-1.018c-.49-.252-.912-.47-.912-.925a.642.642 0 01.7-.668.506.506 0 01.056 0 .68.68 0 01.455.174.874.874 0 01.187.662v.044h.728v-.042a1.438 1.438 0 00-.323-1.094 1.408 1.408 0 00-1.06-.36 1.321 1.321 0 00-1.46 1.35c0 .813.653 1.144 1.231 1.445.5.262.937.484.937.95 0 .49-.274.736-.819.736a.723.723 0 01-.768-.817v-.183h-.692v.045a1.617 1.617 0 00.346 1.2 1.459 1.459 0 001.084.373h.024c.994 0 1.542-.493 1.542-1.387 0-.853-.672-1.2-1.256-1.5zm4.387 0c-.488-.252-.913-.47-.913-.925a.642.642 0 01.7-.668h.058a.694.694 0 01.457.174.887.887 0 01.187.662v.044h.725v-.042a1.421 1.421 0 00-.322-1.09 1.4 1.4 0 00-1.06-.361 1.321 1.321 0 00-1.46 1.35c0 .814.654 1.145 1.232 1.445.5.261.935.485.935.95 0 .49-.277.737-.819.737a.723.723 0 01-.764-.818v-.184h-.695v.043a1.621 1.621 0 00.35 1.2 1.448 1.448 0 001.08.373h.023c.994 0 1.542-.493 1.542-1.387 0-.85-.665-1.2-1.255-1.5zm3.487.593H54v-.619h-1.74v-1.462h1.872v-.62h-2.575V19.9h2.614v-.622h-1.91V17.7zm6.1 1.29l-1.8-3.991h-.96v4.9h.636v-4.045L58.07 19.9H59v-4.906h-.635v3.991z"></path></svg>
        ) : ''}
        {currentSite === 'ECK' ? (
          <svg icon="eck_logo" height="56" viewBox="0 0 48.601 20"><title>Eckerle Logo</title><path d="M46.652 12.059c-.458-.108-1.888 1.079-2.023 1.537v.027a.026.026 0 00.027.027 3.273 3.273 0 002-1.591m-19.042.457c-.647.054-1.591 1.106-1.861 1.672 0 .027 0 .081.027.081a3.168 3.168 0 001.834-1.753c.027.027 0 .027 0 0m19.955 3.721c.108.458.189.944.27 1.4-1.24.512-2.508 1.052-3.748 1.537-.054 0-.081.027-.135.027-1.375.4-2.535-.216-2.292-1.78l-.027.027a15.046 15.046 0 01-4.126 2.023c-2.13.809-1-1.537-.728-2.562a.094.094 0 01.027-.054v-.027c0-.027 0-.027.027-.054v-.135l-.027-.023h-.054c-.054.027-.081.054-.135.081h-.027a13.112 13.112 0 01-4.611 3.047h-.054a.747.747 0 01-.351.027.1.1 0 01-.081-.027c-1.16-.3.944-5.366 1.4-6.121a21.6 21.6 0 01-5.5 5.232c-1.645.917-4.584 1.969-4.4-1.025-1 .593-1.969 1.187-2.966 1.753h-.027c-.027 0-.027 0-.027.027-1.375.674-1.591-.431-1.645-1.564-.081-.674-.162-1.321-.243-1.969v-.027c-.4.189-.782.378-1.187.539-.431 1.079-.89 2.157-1.348 3.236H13.7c.512-1.24 1-2.508 1.483-3.775a41.417 41.417 0 01-5.474 3.56.084.084 0 01-.054.027c-.027.027-.081.027-.108.054-1.294.593-1.7-1.16-1.726-2.13a.026.026 0 00-.027.027C5.474 20.068.539 21.716 0 16.966.189 14 2.993 12.031 5.366 10.71c-2.8-2.238-1.726-5.555.971-7.227C13.591-.697 23.164-.751 31.12 1.407c3.344.89 6.769 3.8 5.96 7.6a75.308 75.308 0 00-1.564-.4A4.108 4.108 0 0034.3 5.344l-.054-.054a9.274 9.274 0 00-4.016-2.319C23.272.921 12.027.867 6.31 5.748l-.027.027a2156.771 2156.771 0 01-.054.054c0 .027-.027.027-.027.054a2.694 2.694 0 00-.7 1.969c.162 1.348 1.51 2.157 2.616 2.751a5.028 5.028 0 00.539.27 1.859 1.859 0 00-.27.108c-2.562 1.16-5.717 2.8-6.148 5.879.108 2.427 2.912 1 4.072.162.027 0 .027-.027.054-.027.054-.027.081-.054.135-.081 2.265-1.4 2.939-4.261 5.42-5.474a1.716 1.716 0 01.917-.378h2.589c-2.454 1.187-4.935 3.074-5.609 5.852v.027c0 .027-.027.054-.027.081a.69.69 0 00.054.566l.027.027c.4.189.809-.27 1.133-.431 1.645-1.052 3.29-2.1 4.827-3.29h.027a.026.026 0 00.027-.027c.027 0 .027-.027.054-.027a.026.026 0 01.027-.027v-.027a8.847 8.847 0 001.214-1.915 353.342 353.342 0 002.319-4.476v-.029h2.023c-1.267 2.427-2.508 4.827-3.775 7.254 1.429-1.187 2.858-2.373 4.261-3.56h2.427c-1.591 1.294-3.155 2.616-4.719 3.91.054.944.081 1.888.135 2.832v.108l.027.027h.022a.644.644 0 00.243-.054c.027 0 .054-.027.081-.027.863-.485 1.7-1.025 2.562-1.537h.027a.026.026 0 00.027-.027h.027l.027-.027.027-.027c.027-.054.081-.108.108-.162.836-2.157 2.265-4.638 4.8-4.962.539-.027 1.564-.3 1.888.243a1.262 1.262 0 01-.108.62c-.782 2.13-2.832 3.506-4.665 4.692v.054a7.117 7.117 0 00-.027 1.079 1.027 1.027 0 00.081.27l.027.027a.026.026 0 00.027.027v.027h.027c.027.027.054.027.108.027h.108a1.6 1.6 0 00.512-.135c.027 0 .054-.027.081-.027 3.263-1.969 5.609-5.124 7.739-8.225l.027.027a10.853 10.853 0 002.265 2.184c-.7 1.24-2.292 3.317-2.346 4.692a.1.1 0 00.027.081.122.122 0 00.081.081h.108c.027 0 .054-.027.081-.027.054-.027.081-.027.108-.054a.026.026 0 00.027-.027c.027-.027.054-.027.081-.054a.094.094 0 01.054-.027 16.5 16.5 0 003.694-2.993v-.027l.027-.027a1.113 1.113 0 00.189-.3 42.771 42.771 0 013.667-6.5h1.834c-.027.054-.081.135-.108.189a67.724 67.724 0 00-4.881 9.924v.054a.2.2 0 00-.027.135v.135a.026.026 0 00.027.027l.027.027h.027c.351.054.674-.189 1-.3a8.069 8.069 0 001.834-1v-.054c.027-.027.027-.081.054-.108v-.054c.027-.054.054-.081.054-.135a6.622 6.622 0 012.319-3.775h.023l.027-.027a5.125 5.125 0 014.45-1.079c.027 0 .027 0 .054.027a.026.026 0 01.027.027h.027c.027 0 .027.027.054.027l.027.027v.027c.189.647-.458 1.24-.809 1.7a12.741 12.741 0 01-4.1 3.182h-.081l-.027.027c0 .027-.027.027-.027.054-.027.054-.081.108-.108.162s-.027.108-.054.162a1.783 1.783 0 00.054 1.24c.351.324.917-.081 1.321-.189.809-.324 1.645-.647 2.454-.971a.1.1 0 01.081-.027c.27-.027.27-.027.3-.027"></path></svg>
        ) : ''}
      </div>
    </Link>
  )
}

const MegaNav = ({ showMegaMenuContent, setShowMegaMenuContent }) => {
  const [subMenuItems, setSubMenuItems] = useState([])
  const [showMegaMenuRightContent, setShowMegaMenuRightContent] =
    useState(false)
  const [subMenuMegaContent, setSubMenuMegaContent] = useState([])
  const onShowMegaMenu = () => setShowMegaMenuContent(true)
  const overMenuItem = (items) => {
    setSubMenuItems(items)
    if (!showMegaMenuContent) setShowMegaMenuContent(true)
  }
  const hideMegaMenuContent = () => {
    setShowMegaMenuContent(false)
  }
  const menuList = useSelector(pageMenuSelector)

  const { fields } = useContentful()
  return (
    <div className="dropdown flex text-base">
      {menuList.map((item, index) => (
        <button
          key={index}
          className="mega_menu_dropbtn"
          onMouseOver={() =>
            item.items.length !== 0
              ? overMenuItem(item.items)
              : hideMegaMenuContent()
          }
        >
          <Link to={!item.items.length ? addTenantToUrl(item.url) : homeUrl}>
            <div className="text-base uppercase text-black font-bold">
              {' '}
              {item.contentfulFieldName
                ? fields[item.contentfulFieldName]
                : item.title}
            </div>
          </Link>

          <ChevronDownIcon
            className={item.items.length ? 'ml-2 mt-1 h-5 w-5' : 'hidden'}
            aria-hidden="true"
          />
        </button>
      ))}
      {showMegaMenuContent ? (
        <div
          className="header-mega_dropdown-content"
          onMouseEnter={onShowMegaMenu}
          onClick={() => setShowMegaMenuContent(false)}
        >
          <div className="row w-full h-full flex">
            <div className="h-full w-[24%] mega_content_bg">
              <div className="pl-[72px] pt-[72px] overflow-y-auto max-h-full">
                <ul className=" text-black text-base font-bold">
                  {subMenuItems.map((item, index) => (
                    <Link replace key={index} to={addTenantToUrl(item.url)}>
                      <li
                        className="mega_content_category_li"
                        onMouseOver={() => {
                          setSubMenuMegaContent(item.items)
                          setShowMegaMenuRightContent(true)
                        }}
                        onMouseLeave={() => {
                          setShowMegaMenuRightContent(false)
                        }}
                      >
                        {item.title}
                      </li>
                    </Link>
                  ))}
                </ul>
              </div>
            </div>
            <div
              className="h-full w-[76%] grid grid-cols-4 overflow-y-auto gap-4 pl-[72px] pt-[72px] max-h-full"
              onMouseOver={() => setShowMegaMenuRightContent(true)}
            >
              {showMegaMenuRightContent
                ? subMenuMegaContent.map((item) => (
                    <div key={item.categoryId}>
                      <ul className=" text-black text-base">
                        <Link to={addTenantToUrl(item.url)}>
                          <li className="mega_content_sub_cat_li font-bold">
                            {item.title}
                          </li>
                        </Link>
                        {item.items.map((eachItem) => (
                          <Link
                            key={eachItem.categoryId}
                            to={addTenantToUrl(eachItem.url)}
                          >
                            <li className="mega_content_sub_cat_li">
                              {eachItem.title}
                            </li>
                          </Link>
                        ))}
                      </ul>
                    </div>
                  ))
                : null}
            </div>
          </div>
        </div>
      ) : null}
    </div>
  )
}

const TopNav = ({ title }) => {
  const nav_title_condition = title !== '' && title !== 'home' ? true : false
  const [showMegaMenuContent, setShowMegaMenuContent] = useState(false)

  return (
    <div
      className={
        title === 'home'
          ? 'desktop_only_flex w-full md:h-36 absolute z-10'
          : title === ''
          ? 'nav-background-title desktop_only_flex h-36'
          : 'desktop_only_flex w-full md:h-60 absolute z-10 nav-background-title'
      }
    >
      <div className="px-10 pt-[76px] w-full xl:px-24  h-36">
        <div
          className="menu-wrapper w-full border-b-[1px] border-black"
          onMouseLeave={() => {
            setShowMegaMenuContent(false)
          }}
        >
          <div className="m-auto flex items-center justify-center">
          <div
              className="hidden lg:flex justify-start"
              onMouseOver={() => setShowMegaMenuContent(false)}
            >
              <AlgoliaSearchbar />
            </div>

            <div className="m-auto">
              <Logo onMouseOver={() => setShowMegaMenuContent(false)} />
            </div>
          </div>

          <div className="w-full h-12 flex items-center justify-center">

            <MegaNav
              showMegaMenuContent={showMegaMenuContent}
              setShowMegaMenuContent={setShowMegaMenuContent}
            />
          </div>
        </div>
      </div>
      {nav_title_condition && (
        <div className=" md:absolute mt-[200px] ml-24 text-black font-inter font-bold text-[32px]">
          {title}
        </div>
      )}
    </div>
  )
}

const Topbar = ({ title }) => {
  return (
    <>
      <Navbar />
      <TopNav title={title} />
    </>
  )
}

export default Topbar
